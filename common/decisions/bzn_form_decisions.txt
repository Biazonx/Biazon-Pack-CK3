form_romania_kingdom_decision = {
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_found_kingdom.dds"
	}
	desc = form_romania_kingdom_decision_desc
	selection_tooltip = form_romania_kingdom_decision_tooltip
	decision_group_type = regional_major
	ai_check_interval = 120
	
	is_shown = {
		NOT = { exists = title:k_romania.holder }
		NOT = {  # Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_formed_romania_kingdom
			}
		}
		# No kings or emperors...
		highest_held_title_tier <= tier_kingdom
		any_held_title = {
			tier = tier_county
			title_province = { geographical_region = custom_eastern_balkans }
		}
	}

	is_valid = {
		is_independent_ruler = yes
		# Must be suitably prestigious.
		prestige_level >= 2
		# Must control core Romania
		completely_controls_region = custom_romania
	}

	effect = { 
		form_romania_scripted_effect = yes
		add_prestige = major_prestige_gain
		house = {
			add_house_modifier = {
			modifier = romania_title_reward_house_modifier 
				years = 200
			}
		}
	}
	
	cost = {
		gold = 250
	}
	
	ai_potential = {
		prestige_level >= 2
	}

	ai_will_do = {
		base = 100
	}
}

form_yugoslavia_empire_decision = {
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_found_kingdom.dds"
	}
	desc = form_yugoslavia_empire_decision_desc
	selection_tooltip = form_yugoslavia_empire_decision_tooltip
	decision_group_type = regional_major
	ai_check_interval = 120
	
	is_shown = {
		NOT = { exists = title:e_yugoslavia.holder }
		NOT = {  # Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_formed_yugoslavia_empire
			}
		}
		# No kings or emperors...
		highest_held_title_tier <= tier_kingdom
		any_held_title = {
			tier = tier_county
			title_province = { geographical_region = custom_yugoslavia }
		}
	}

	is_valid = {
		is_independent_ruler = yes
		# Must be suitably prestigious.
		prestige_level >= 2
		# Must control core Yugoslavia
		completely_controls_region = custom_yugoslavia
	}

	effect = { 
	form_yugoslavia_scripted_effect = yes
	add_prestige = 500
	}
	
	cost = {
		gold = 250
	}
	
	ai_potential = {
		prestige_level >= 2
	}

	ai_will_do = {
		base = 100
	}
}

form_czechslovakia_empire_decision = {
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_found_kingdom.dds"
	}
	desc = form_czechslovakia_empire_decision_desc
	selection_tooltip = form_czechslovakia_empire_decision_tooltip
	decision_group_type = regional_major
	ai_check_interval = 120
	
	is_shown = {
		NOT = { exists = title:e_czechslovakia.holder }
		NOT = {  # Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_formed_czechslovakia_empire
			}
		}
		# No kings or emperors...
		highest_held_title_tier <= tier_kingdom
		any_held_title = {
			tier = tier_county
			title_province = { geographical_region = custom_czechslovakia }
		}
	}

	is_valid = {
		is_independent_ruler = yes
		# Must be suitably prestigious.
		prestige_level >= 2
		# Must control core Yugoslavia
		completely_controls_region = custom_czechslovakia
	}

	effect = { 
	form_czechslovakia_scripted_effect = yes
	add_prestige = 500
	}
	
	cost = {
		gold = 250
	}
	
	ai_potential = {
		prestige_level >= 2
	}

	ai_will_do = {
		base = 100
	}
}

bzn_embrace_german_culture_decision = {
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_culture.dds"
	}

	decision_group_type = regional_major

	ai_check_interval = 120

	is_shown = {
		NOT = { exists = title:k_teutonic.holder }
		NOT = {  # Can only do it once.
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_formed_teutonic_kingdom
			}
		}
		OR = {
			culture = culture:prussian
			culture = culture:pomeranian
		}
		NOT = { culture = culture:german }
	}

	is_valid = {
		OR = {
			culture = culture:prussian
			culture = culture:pommeranian
		}
		prestige_level >= 2
		piety_level >= 2
		completely_controls_region = custom_teutonic
		highest_held_title_tier <= tier_duchy
	}

	desc = embrace_german_culture_decision_desc
	cost = { gold = 250 piety = 250 }

	effect = {
		form_teutonic_scripted_effect = yes
		add_prestige = 1000
		set_culture = culture:german
		set_character_faith = faith:catholic
		every_close_family_member = { set_character_faith = faith:catholic }

	}

	ai_potential = {
		prestige_level >= 2
	}

	ai_will_do = {
		base = 100
	}
}

bzn_adopt_chinese_administration_decision = {
    picture = {
        reference = "gfx/interface/illustrations/decisions/decision_culture.dds"
    }
    decision_group_type = regional_major
    ai_check_interval = 120
    is_shown = {
        NOT = { government_has_flag = government_is_administrative }
        NOT = { government_has_flag = government_is_shogunate }
        culture = culture:han
        OR = {
            has_government = feudal_government
            has_government = tribal_government
            has_government = clan_government
        }
    }
    is_valid = {
        primary_title = {
            tier >= tier_kingdom
        }
        culture = culture:han
        is_independent_ruler = yes
    }
    desc = adopt_chinese_administration_decision_desc
    cost = { prestige = 250 }
    effect = {
        every_realm_province = {
            limit = { has_holding_type = tribal_holding }
            set_holding_type = castle_holding
        }
        change_to_celestial_effect = yes
        every_vassal_or_below = {
            limit = {
                OR = {
                    has_government = feudal_government
                    has_government = tribal_government
                    has_government = clan_government
                }
            }
            change_to_celestial_effect = yes
        }
    }
    ai_potential = {
        always = yes
    }
    ai_will_do = {
        base = 100
    }
}

bzn_novgorod_republic_decision = {
    picture = {
        reference = "gfx/interface/illustrations/decisions/decision_culture.dds"
    }
    decision_group_type = regional_major
    ai_check_interval = 0
    is_shown = {
        OR = {
            culture = { has_cultural_pillar = heritage_north_germanic }
            culture = { has_cultural_pillar = heritage_east_slavic }
        }
		any_held_title = {
			tier = tier_county
			title_province = { geographical_region = custom_novgorod }
		}
		
		OR = {
            has_government = feudal_government
            has_government = tribal_government
            has_government = clan_government
        }
		
        NOT = { government_has_flag = government_is_administrative }
    }
    is_valid = {
        has_primary_title = title:k_novgorod
        culture = { has_cultural_pillar = heritage_east_slavic }
        is_independent_ruler = yes
    }
    desc = novgorod_republic_decision_desc
    cost = { gold = 500 }
    effect = {
		add_prestige = 1000
		if = {
			limit = { has_government = tribal_government }
			convert_whole_realm_to_feudalism_effect = yes
		}
        change_to_administrative_effect = yes
        every_vassal_or_below = {
            limit = {
                OR = {
                    has_government = feudal_government
                    has_government = tribal_government
                    has_government = clan_government
                }
            }
            change_to_administrative_effect = yes
        }
    }
    ai_potential = {
        always = yes
    }
    ai_will_do = {
        base = 0
    }
}

elevate_crete_decision = {
	picture = {
        reference = "gfx/interface/illustrations/decisions/z_ave_maria_sea_travel.dds"
    }
	
	desc = elevate_crete_decision_desc
    decision_group_type = regional_major
    ai_check_interval = 120
	
	cooldown = { years = 1 }

	is_shown = {
		#Standard filter checks.
		is_landed = yes
		OR = {
			has_government = clan_government
		}
		#Must be within the North African cultural sphere.
		culture = { 
			OR = {
				has_cultural_pillar = heritage_berber
				has_cultural_pillar = heritage_arabic
				has_cultural_pillar = heritage_iberian
			}
		}
		#Must be in the vague region.
		any_held_title = {
			tier = tier_county
			title_province = { geographical_region = custom_krete }
		}
		#Can't already be a kingdom.
		highest_held_title_tier <= tier_duchy
		#Not repeatable.
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_elevated_crete
			}
		}
	}

	is_valid = {
		prestige_level >= 2
		#Must be independent.
		is_independent_ruler = yes
		#Has to be around for the ceremony.
		is_imprisoned = no
		#Completely controls Krete.
		has_title = title:c_chandax
		has_title = title:c_chania
		has_title = title:d_krete
		#Must be of Muslim Faith
		has_religion = religion:islam_religion
		#Can't already be a kingdom; show this here too so people aren't caught unawares.
		highest_held_title_tier <= tier_duchy
		#Must be in/adjacent to the Viking Age; show this here too so people aren't caught unawares.
	}

	is_valid_showing_failures_only = {
		is_alive = yes
		is_in_an_activity = no
		is_imprisoned = no
		has_contagious_deadly_disease_trigger = no
	}

	effect = {
		save_scope_as = founder
		# Trigger effects.
		show_as_tooltip = { elevate_crete_scripted_effect = yes }
		trigger_event = { id = eec_major_decisions.0001 }
		#Notify Byzantine Emperor.
		title:e_byzantium.holder = {
    			every_vassal_or_below = {
        			limit = { 
            				is_ai = no
           				 highest_held_title_tier >= tier_county
           				 capital_county = {
               				 is_coastal_county = yes
           			 }
        		}
        		trigger_event = { id = eec_major_decisions.0002 }
    			}
    			if = {
        			limit = { is_ai = no }
   	     			trigger_event = { id = eec_major_decisions.0002 }
    			}
	}
		hidden_effect = {
			add_to_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_elevated_crete
			}
		}
	}

	cost = {
		prestige = 300
	}

	ai_potential = {
		always = no
	}

	ai_will_do = {
		base = 0
	}
}

form_the_kingdom_of_aragon_decision = {
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_found_kingdom.dds"
	}
	decision_group_type = major

	ai_check_interval = 60

	desc = form_the_kingdom_of_aragon_decision_desc
	selection_tooltip = form_the_kingdom_of_aragon_decision_tooltip

	is_shown = {
		is_playable_character = yes # Redundancy check
		# Can't form Aragon if Aragon already formed.
		game_start_date < 1035.10.18
		# Not relevant for characters who are already kings.
		highest_held_title_tier <= tier_duchy
		# Cast a broad net for folks who might like to try this.
		capital_province = { geographical_region = dlc_fp2_form_aragon_region }
		# Aaaaand it can't have happened already.
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:flag_formed_kingdom_of_aragon
			}
		}
	}

	is_valid = {
		is_independent_ruler = yes
		completely_controls = title:d_aragon
		OR = {
			completely_controls = title:d_barcelona
			completely_controls = title:d_valencia
			completely_controls = title:d_navarra
		}
	}
	
	is_valid_showing_failures_only = {
		is_landed = yes
	}

	effect = {
		gain_heroic_legend_seed_tooltip_effect = yes
		# Grab scopes for loc.
		save_scope_as = founder
		culture = { save_scope_as = founder_culture }
		culture:aragonese = { save_scope_as = aragonese_culture }
		title:k_aragon = { save_scope_as = k_aragon }
		title:d_aragon = { save_scope_as = d_aragon }
		title:d_valencia = { save_scope_as = d_valencia }
		title:d_barcelona = { save_scope_as = d_barcelona }
		title:d_navarra = { save_scope_as = d_navarra }
		# Create kingdom title.
		create_title_and_vassal_change = {
			type = created
			save_scope_as = change
		}
		title:k_aragon = {
			change_title_holder = {
				holder = scope:founder
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change
		# Gain some prestige.
		add_prestige = major_prestige_gain
		# You shift to Aragonese culture, but will have a chance to change it.
		## We do the actual change inside the event for nicer tooltip grouping.
		show_as_tooltip = { set_culture = culture:aragonese }
		custom_tooltip = form_the_kingdom_of_aragon_decision.tt.form_aragonese
		trigger_event = iberia_north_africa.0131
		# De jure shifts.
		## Take care of the preferred empire.
		if = {
			limit = { NOT = { title:k_aragon.empire = title:d_aragon.empire } }
			title:k_aragon = { set_de_jure_liege_title = title:d_aragon.empire }
		}
		## The heartlands drift over.
		title:d_aragon = { set_de_jure_liege_title = title:k_aragon }
		## Various neighbouring duchies can be preemptively integrated.
		### From Valencia.
		if = {
			limit = { completely_controls = title:d_valencia }
			title:d_valencia = { set_de_jure_liege_title = title:k_aragon }
		}
		else = { custom_tooltip = form_the_kingdom_of_aragon_decision.tt.drift.d_valencia }
		### From Aquitaine.
		if = {
			limit = { completely_controls = title:d_barcelona }
			title:d_barcelona = { set_de_jure_liege_title = title:k_aragon }
		}
		else = { custom_tooltip = form_the_kingdom_of_aragon_decision.tt.drift.d_barcelona }
		### From Navarre.
		if = {
			limit = { completely_controls = title:d_navarra }
			title:d_navarra = { set_de_jure_liege_title = title:k_aragon }
		}
		else = { custom_tooltip = form_the_kingdom_of_aragon_decision.tt.drift.d_navarra }
		if = {
			limit = { completely_controls = title:d_mallorca }
			title:d_mallorca = { set_de_jure_liege_title = title:k_aragon }
		}
		if = {
			limit = { completely_controls = title:d_sardinia }
			title:d_sardinia = { set_de_jure_liege_title = title:k_aragon }
		}
		if = {
			limit = { completely_controls = title:d_corsica }
			title:d_corsica = { set_de_jure_liege_title = title:k_aragon }
		}
		if = {
			limit = { completely_controls = title:d_athens }
			title:d_athens = { set_de_jure_liege_title = title:k_aragon }
		}
		if = {
			limit = { completely_controls = title:d_sicily }
			title:d_sicily = { set_de_jure_liege_title = title:k_aragon }
		}
		if = {
			limit = { completely_controls = title:d_calabria }
			title:d_calabria = { set_de_jure_liege_title = title:k_aragon }
		}
		if = {
			limit = { completely_controls = title:d_salerno }
			title:d_salerno = { set_de_jure_liege_title = title:k_aragon }
		}
		if = {
			limit = { completely_controls = title:d_apulia }
			title:d_apulia = { set_de_jure_liege_title = title:k_aragon }
		}
		if = {
			limit = { completely_controls = title:d_benevento }
			title:d_benevento = { set_de_jure_liege_title = title:k_aragon }
		}
		if = {
			limit = { completely_controls = title:d_capua }
			title:d_capua = { set_de_jure_liege_title = title:k_aragon }
		}
		
		# Plus, call the place Aragon rather than Zaragoza.
		title:d_aragon = { reset_title_name = yes }
		# Once per game.
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:flag_formed_kingdom_of_aragon
		}
		# Note this for books and such.
		set_global_variable = {
			name = flag_formed_kingdom_of_aragon
			value = scope:founder
		}

		# Reward suggested by Ewan
		house = {
			add_house_modifier = {
				modifier = fp2_aragon_title_reward_house_modifier # Mountains/hills bonus + hard casualty bonus
				years = 200
			}
		}
	}

	cost = {
		gold = {
			# Since we want this to happen, it free for the AI...
			value = 0
			# ... but costs for players.
			if = {
				limit = { is_ai = no }
				add = 200
			}
		}
	}

	ai_potential = {
		any_held_title = { this = title:d_aragon }
	}

	ai_will_do = { base = 100 }
}

	