form_romania_scripted_effect = {
	save_scope_as = founder
	create_title_and_vassal_change = {
		type = created
		save_scope_as = title_change
		add_claim_on_loss = no
	}
	title:k_romania = {
		change_title_holder = {
			holder = scope:founder
			change = scope:title_change
		}
	}
	resolve_title_and_vassal_change = scope:title_change
	title:d_muntenia = { set_de_jure_liege_title = title:k_romania }
	title:d_transylvanian_alps = { set_de_jure_liege_title = title:k_romania }
	title:d_oltenia = { set_de_jure_liege_title = title:k_romania }
	title:d_transylvania = { set_de_jure_liege_title = title:k_romania }
	title:c_galatia = { set_de_jure_liege_title = title:k_romania }
	set_primary_title_to = title:k_romania 
}

form_teutonic_scripted_effect = {
	save_scope_as = founder
	create_title_and_vassal_change = {
		type = created
		save_scope_as = title_change
		add_claim_on_loss = no
	}
	
	title:k_teutonic = {
		change_title_holder = {
			holder = scope:founder
			change = scope:title_change
		}
	}
	
	title:d_prussia = { set_de_jure_liege_title = title:k_teutonic }
	title:d_masuria = { set_de_jure_liege_title = title:k_teutonic }
	title:d_pomerelia = { set_de_jure_liege_title = title:k_teutonic }
	resolve_title_and_vassal_change = scope:title_change

	set_primary_title_to = title:k_teutonic 
	
	if = {
		limit = {
			NOT = { capital_county = title:c_malbork }
		}
		set_realm_capital = title:c_malbork
	}
	capital_county = { set_county_faith = faith:catholic }
	# And convert it to your culture if it wasn't some flavour of European.
	if = {
		limit = {
			NOR = {
				title:c_malbork.culture = {
					has_cultural_pillar = heritage_central_germanic 
				}
				title:c_malbork.culture = culture:german
			}
		}
		title:c_malbork = { set_county_culture = culture:german }
	}
	
	if = {
		limit = { has_government = tribal_government }
		convert_whole_realm_to_feudalism_effect = yes
	}
	
	title:k_teutonic = {
		add_title_law = feudal_elective_succession_law
		if = {	#Add Salic law.
			limit = {
				root = {
					OR = {
						has_realm_law = male_preference_law
						has_realm_law = male_only_law
					}
				}
			}
			add_title_law = male_only_law
		}
		if = {	#Ignore Salic law.
			limit = {
				root = { has_realm_law = equal_law }
			}
			add_title_law = equal_law
		}
		if = {	#Invert Salic law. Take that, Clovis, y'big nerd.
			limit = {
				root = {
					OR = {
						has_realm_law = female_preference_law
						has_realm_law = female_only_law
					}
				}
			}
			add_title_law = female_only_law
		}
	}
	
}

form_yugoslavia_scripted_effect = {
	# Save the current scope as the founder
	save_scope_as = founder

	# Create the empire title and register the change
	create_title_and_vassal_change = {
		type = created
		save_scope_as = title_change
		add_claim_on_loss = no
	}

	# Assign the newly created title to the founder
	title:e_yugoslavia = {
		change_title_holder = {
			holder = scope:founder
			change = scope:title_change
		}
	}

	# Apply the title creation and vassal changes
	resolve_title_and_vassal_change = scope:title_change

	# Set de jure vassal kingdoms under e_yugoslavia
	title:k_croatia = { set_de_jure_liege_title = title:e_yugoslavia }
	title:k_serbia = { set_de_jure_liege_title = title:e_yugoslavia }
	set_primary_title_to = title:e_yugoslavia 
	
}

form_czechslovakia_scripted_effect = {
	# Save the current scope as the founder
	save_scope_as = founder

	# Create the empire title and register the change
	create_title_and_vassal_change = {
		type = created
		save_scope_as = title_change
		add_claim_on_loss = no
	}

	# Assign the newly created title to the founder
	title:e_czechslovakia = {
		change_title_holder = {
			holder = scope:founder
			change = scope:title_change
		}
	}

	# Apply the title creation and vassal changes
	resolve_title_and_vassal_change = scope:title_change

	# Set de jure vassal kingdoms under e_yugoslavia
	title:k_bohemia = { set_de_jure_liege_title = title:e_czechslovakia }
	title:d_ungvar = { set_de_jure_liege_title = title:k_moravia }
	title:k_moravia = { set_de_jure_liege_title = title:e_czechslovakia }
	
	set_primary_title_to = title:e_czechslovakia

}

found_northern_capital_scripted_effect = {
	#Reward fame to compensate for reduced development gain.
	scope:new_northern_capital.holder = {
		add_prestige_experience = 1000
	}
	scope:new_northern_capital = {
		#Boost local development a few levels; majority of development gain is handled in the modifiers now.
		if = {
			limit = { development_level < 5 }
			change_development_level = {
				value = 5
				subtract = scope:new_northern_capital.development_level
			}
		}
		else_if = {
			limit = { development_level < 8 }
			change_development_level = {
				value = 8
				subtract = scope:new_northern_capital.development_level
			}
		}
		else_if = {
			limit = { development_level < 12 }
			change_development_level = {
				value = 12
				subtract = scope:new_northern_capital.development_level
			}
		}
		#If control is less than full, boost it to full.
		if = {
			limit = { county_control < full_county_control }
			change_county_control = 100
		}
		#Add county modifier giving solid opinion for a decent chunk of time.
		add_county_modifier = {
			modifier = northern_capital_opinion_modifier
			years = 20
		}
		#Add county modifier giving intense benefits for a century.
		add_county_modifier = {
			modifier = northern_capital_misc_benefits_modifier
			years = 100
		}
	}
}