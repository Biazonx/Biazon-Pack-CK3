form_lower_niger_empire_scripted_effects = {
    
    add_prestige_level = 1
    dynasty = {
        add_dynasty_prestige = 300
    }
	#gain 3 random innovations from cultures of the empire
	hidden_effect = {
		#Add all lower niger cultures in the realm in a list
		every_vassal_or_below = {
			limit = {
				OR = {
					culture = { has_cultural_pillar = heritage_central_african }
					culture = { has_cultural_pillar = heritage_yoruba }
					culture = { has_cultural_pillar = heritage_west_african }
				}
				save_temporary_scope_as = lower_niger_vassal
				NOT = {
					any_in_list = {
						list = lower_niger_cultures
						this = scope:lower_niger.culture
					}
				}
			}
			culture = {
				add_to_list = lower_niger_cultures
			}
		}
		#Add innovations from 3 random cultures
		every_in_list = {
			list = lower_niger_cultures
			save_scope_as = culture_getting_innovations

			set_while_counter_variable_effect = yes
			while = {
				limit = { var:while_counter < 3 }
				random_in_list = {
					limit = { scope:culture_getting_innovations = { can_get_innovation_from = prev } }
					list = lower_niger_cultures
					scope:culture_getting_innovations = { get_random_innovation_from = prev }
				}
				increase_while_counter_variable_effect = yes
			}
			remove_while_counter_variable_effect = yes
		}
	}
	
	create_title_and_vassal_change = {
		type = created
		save_scope_as = change
		add_claim_on_loss = no
	}
	title:e_lower_niger = {
		change_title_holder = {
			holder = root
			change = scope:change
		}
	}
	resolve_title_and_vassal_change = scope:change
	hidden_effect = { set_primary_title_to = title:e_lower_niger }
    
	#Variable effects.
	##Unreformed tribals.
	if = {
		limit = {
			government_has_flag = government_is_tribal
			faith = { has_doctrine_parameter = unreformed }
		}
		#You become feudal.
		convert_whole_realm_to_feudalism_effect = yes
		#To keep you stable, we give you a nice permanent modifier.
		if = {
			limit = { is_male = yes }
			add_character_modifier = { modifier = high_king_of_the_niger_modifier }
		}
		else = {
			add_character_modifier = { modifier = high_queen_of_the_niger_modifier }
		}
		#And a nickname.
		give_nickname = nick_the_ladylord_of_the_niger
	}
	##Everyone else (e.g., Christians, unreformed feudals, etc).
	else_if = {
		limit = {
			NOT = { government_has_flag = government_is_tribal }
		}
		#Loyalty hooks & huge opinion boost from all agreeable vassals.
		every_vassal = {
			limit = {
				is_powerful_vassal = yes
				opinion = {
					target = scope:founder
					value >= 1
				}
			}
			if = {
				limit = {
					scope:founder = { is_male = yes }
				}
				add_opinion = {
					modifier = wap_king_of_the_niger_opinion
					target = scope:founder
				}
			}
			else = {
				add_opinion = {
					modifier = wap_queen_of_the_niger_opinion
					target = scope:founder
				}
			}
			save_temporary_scope_as = current_vassal
			scope:founder = {
				add_hook = {
					type = loyalty_hook
					target = scope:current_vassal
				}
			}
		}
		#And a suitable nickname.
		give_nickname = nick_the_ancestors_fury
	}
}

# Used to set a personal Orisha cult
set_orisha_effect = {
	# Remove any previous personal god relation.
	if = {	
		limit = {
			has_character_modifier = orisha_deity_obatala
		}
		remove_character_modifier = orisha_deity_obatala
		add_piety = massive_piety_loss
	}
	else_if = {	
		limit = {
			has_character_modifier = orisha_deity_yemoja
		}
		remove_character_modifier = orisha_deity_yemoja
		add_piety = massive_piety_loss
	}
	else_if = {	
		limit = {
			has_character_modifier = orisha_deity_orunmila
		}
		remove_character_modifier = orisha_deity_orunmila
		add_piety = massive_piety_loss
	}
	else_if = {	
		limit = {
			has_character_modifier = orisha_deity_ogun
		}
		remove_character_modifier = orisha_deity_ogun
		add_piety = massive_piety_loss
	}
	else_if = {	
		limit = {
			has_character_modifier = orisha_deity_olookun
		}
		remove_character_modifier = orisha_deity_olookun
		add_piety = massive_piety_loss
	}
	else_if = {	
		limit = {
			has_character_modifier = orisha_deity_osun
		}
		remove_character_modifier = orisha_deity_osun
		add_piety = massive_piety_loss
	}
	else_if = {	
		limit = {
			has_character_modifier = orisha_deity_esu
		}
		remove_character_modifier = orisha_deity_esu
		add_piety = massive_piety_loss
	}
	else_if = {	
		limit = {
			has_character_modifier = orisha_deity_osoosi
		}
		remove_character_modifier = orisha_deity_osoosi
		add_piety = massive_piety_loss
	}
	else_if = {	
		limit = {
			has_character_modifier = orisha_deity_sango
		}
		remove_character_modifier = orisha_deity_sango
		add_piety = massive_piety_loss
	}
	else = {
		# If no current Orisha, cost is reduced.
		add_piety = medium_piety_loss
	}

	add_character_modifier = $ORISHA$
}